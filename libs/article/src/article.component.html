<div class="article-page">
	<div class="banner">
		<div class="container">
			<h1>{{ (article$|async).title }}</h1>
			<app-article-meta [article]="article$ | async" (follow)="follow($event)" (unfollow)="unfollow($event)" (favorite)="favorite($event)"
			 (unfavorite)="unfavorite($event)" (delete)="delete($event)" [canModify]="canModify">
			</app-article-meta>
		</div>
	</div>

	<div class="container page">
		<div class="row article-content">
			<div class="col-md-12">
				<div [innerHTML]="(article$ | async)?.body | markdown"></div>
			</div>
		</div>
		<hr />
		<div class="article-actions">
			<app-article-meta [article]="article$ | async" (follow)="follow($event)" (unfollow)="unfollow($event)" (favorite)="favorite($event)"
			 (unfavorite)="unfavorite($event)" (delete)="delete($event)" [canModify]="canModify"></app-article-meta>
		</div>

		<div class="row">
			<div class="col-xs-12 col-md-8 offset-md-2">
				<!-- <div *ngIf="isAuthenticated$ | async">
					<div class="card comment-form">
						<app-dynamic-form (submit)="submit($event)" [data$]="data$" [structure$]="structure$">
						</app-dynamic-form>
						<div class="card-footer">
							<img [src]="currentUser.image" class="comment-author-img" />
							<button class="btn btn-sm btn-primary" type="submit">
								Post Comment
							</button>
						</div>
					</div>
				</div> -->

				<div *ngIf="!(isAuthenticated$ | async)">
					<a [routerLink]="['/login']">Sign in</a> or
					<a [routerLink]="['/register']">sign up</a> to add comments on this article.
				</div>

				<app-article-comment *ngFor="let comment of (comments$ | async)" [canModify]="canModify" (delete)="deleteComment($event)"
				 [article]="article$ | async" [comment]="comment"></app-article-comment>
			</div>
		</div>
	</div>
</div>