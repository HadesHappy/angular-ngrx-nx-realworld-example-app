webpackJsonp([1],{gk9u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n("LMZF"),r=function(){},i=n("As1N"),o=n("mIhp"),u=n("7rlV"),a=n("DjqJ"),s=n("ADVA"),c=n("sMAd"),d=n("AFmI"),p=n("0nO6"),h=(n("AP4T"),function(){return function(){this.submit=new l.EventEmitter,this.updateForm=new l.EventEmitter}}()),f=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function m(t){return l["\u0275vid"](2,[(t()(),l["\u0275eld"](0,0,null,null,2,"app-list-errors",[],null,null,null,u.b,u.a)),l["\u0275did"](1,245760,null,0,a.a,[s.Store,l.ChangeDetectorRef],null,null),(t()(),l["\u0275ted"](-1,null,["\n"])),(t()(),l["\u0275ted"](-1,null,["\n\n"])),(t()(),l["\u0275eld"](4,0,null,null,13,"div",[["class","card comment-form"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](6,0,null,null,2,"app-dynamic-form",[["class","card-block"]],null,[[null,"updateForm"]],function(t,e,n){var l=!0;return"updateForm"===e&&(l=!1!==t.component.updateForm.emit(n)&&l),l},c.b,c.a)),l["\u0275did"](7,245760,null,0,d.a,[p.d],{structure$:[0,"structure$"],data$:[1,"data$"],touchedForm$:[2,"touchedForm$"]},{updateForm:"updateForm"}),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](10,0,null,null,6,"div",[["class","card-footer"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](12,0,null,null,0,"img",[["class","comment-author-img"]],[[8,"src",4]],null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](14,0,null,null,1,"button",[["class","btn btn-sm btn-primary"],["type","submit"]],null,[[null,"click"]],function(t,e,n){var l=!0,r=t.component;return"click"===e&&(l=!1!==r.submit.emit(r.article.slug)&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\tPost Comment\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0),t(e,7,0,n.structure$,n.data$,n.touchedForm$)},function(t,e){t(e,12,0,e.component.currentUser.image)})}var g=n("Un6q"),b=n("UHIZ"),y=function(){return function(){this.delete=new l.EventEmitter}}(),v=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function _(t){return l["\u0275vid"](2,[l["\u0275pid"](0,g.e,[l.LOCALE_ID]),(t()(),l["\u0275eld"](1,0,null,null,31,"div",[["class","card"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](3,0,null,null,4,"div",[["class","card-block"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](5,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](6,null,["",""])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](9,0,null,null,22,"div",[["class","card-footer"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](11,0,null,null,5,"a",[["class","comment-author"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,12).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](12,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](13,2),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](15,0,null,null,0,"img",[["class","comment-author-img"]],[[8,"src",4]],null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t\xa0\n\t\t"])),(t()(),l["\u0275eld"](18,0,null,null,3,"a",[["class","comment-author"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,19).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](19,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](20,2),(t()(),l["\u0275ted"](21,null,["\n\t\t\t","\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](23,0,null,null,2,"span",[["class","date-posted"]],null,null,null,null,null)),(t()(),l["\u0275ted"](24,null,["\n\t\t\t","\n\t\t"])),l["\u0275ppd"](25,2),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](27,0,null,null,3,"span",[["class","mod-options"]],[[8,"hidden",0]],null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](29,0,null,null,0,"i",[["class","ion-trash-a"]],null,[[null,"click"]],function(t,e,n){var l=!0,r=t.component;return"click"===e&&(l=!1!==r.delete.emit({commentId:r.comment.id,slug:r.article.slug})&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,12,0,t(e,13,0,"/profile",n.comment.author.username)),t(e,19,0,t(e,20,0,"/profile",n.comment.author.username))},function(t,e){var n=e.component;t(e,6,0,n.comment.body),t(e,11,0,l["\u0275nov"](e,12).target,l["\u0275nov"](e,12).href),t(e,15,0,n.comment.author.image),t(e,18,0,l["\u0275nov"](e,19).target,l["\u0275nov"](e,19).href),t(e,21,0,n.comment.author.username),t(e,24,0,l["\u0275unv"](e,24,0,t(e,25,0,l["\u0275nov"](e,0),n.comment.createdAt,"longDate"))),t(e,27,0,n.currentUser.username!==n.comment.author.username)})}var E=n("yDcv"),k=function(){function t(){}return t.prototype.transform=function(t){return E(t,{sanitize:!0})},t}(),O=function(){function t(){this.follow=new l.EventEmitter,this.unfollow=new l.EventEmitter,this.unfavorite=new l.EventEmitter,this.favorite=new l.EventEmitter,this.delete=new l.EventEmitter}return t.prototype.toggleFavorite=function(){this.article.favorited?this.unfavorite.emit(this.article.slug):this.favorite.emit(this.article.slug)},t.prototype.toggleFollow=function(){this.article.author.following?this.unfollow.emit(this.article.author.username):this.follow.emit(this.article.author.username)},t.prototype.deleteArticle=function(){this.delete.emit(this.article.slug)},t}(),S=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function C(t){return l["\u0275vid"](2,[l["\u0275pid"](0,g.e,[l.LOCALE_ID]),(t()(),l["\u0275eld"](1,0,null,null,55,"div",[["class","article-meta"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](3,0,null,null,5,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](4,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](5,2),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](7,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](10,0,null,null,10,"div",[["class","info"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](12,0,null,null,3,"a",[["class","author"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](13,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](14,2),(t()(),l["\u0275ted"](15,null,["\n\t\t\t","\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](17,0,null,null,2,"span",[["class","date"]],null,null,null,null,null)),(t()(),l["\u0275ted"](18,null,["",""])),l["\u0275ppd"](19,2),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\n\t"])),(t()(),l["\u0275eld"](22,0,null,null,13,"span",[],[[8,"hidden",0]],null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](24,0,null,null,5,"a",[["class","btn btn-sm btn-outline-secondary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,25).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](25,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](26,2),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](28,0,null,null,0,"i",[["class","ion-edit"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,[" Edit Article\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\n\t\t"])),(t()(),l["\u0275eld"](31,0,null,null,3,"button",[["class","btn btn-sm btn-outline-danger"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.deleteArticle()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](33,0,null,null,0,"i",[["class","ion-trash-a"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,[" Delete Article\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\n\t"])),(t()(),l["\u0275eld"](37,0,null,null,18,"span",[],[[8,"hidden",0]],null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](39,0,null,null,5,"button",[["class","btn btn-sm action-btn"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.toggleFollow()&&l),l},null,null)),l["\u0275did"](40,278528,null,0,g.j,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](41,{"btn-outline-secondary":0,"btn-secondary":1}),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](43,0,null,null,0,"i",[["class","ion-plus-round"]],null,null,null,null,null)),(t()(),l["\u0275ted"](44,null,["\n\t\t\t\xa0 "," ","\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t\xa0\xa0\n\t\t"])),(t()(),l["\u0275eld"](46,0,null,null,8,"button",[["class","btn btn-sm btn-outline-primary"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.toggleFavorite()&&l),l},null,null)),l["\u0275did"](47,278528,null,0,g.j,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](48,{"btn-outline-primary":0,"btn-primary":1}),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](50,0,null,null,0,"i",[["class","ion-heart"]],null,null,null,null,null)),(t()(),l["\u0275ted"](51,null,["\n\t\t\t\xa0 "," Post\n\t\t\t"])),(t()(),l["\u0275eld"](52,0,null,null,1,"span",[["class","counter"]],null,null,null,null,null)),(t()(),l["\u0275ted"](53,null,["(",")"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\n"]))],function(t,e){var n=e.component;t(e,4,0,t(e,5,0,"/profile",n.article.author.username)),t(e,13,0,t(e,14,0,"/profile",n.article.author.username)),t(e,25,0,t(e,26,0,"/editor",n.article.slug)),t(e,40,0,"btn btn-sm action-btn",t(e,41,0,!n.article.author.following,n.article.author.following)),t(e,47,0,"btn btn-sm btn-outline-primary",t(e,48,0,!n.article.favorited,n.article.favorited))},function(t,e){var n=e.component;t(e,3,0,l["\u0275nov"](e,4).target,l["\u0275nov"](e,4).href),t(e,7,0,n.article.author.image),t(e,12,0,l["\u0275nov"](e,13).target,l["\u0275nov"](e,13).href),t(e,15,0,n.article.author.username),t(e,18,0,l["\u0275unv"](e,18,0,t(e,19,0,l["\u0275nov"](e,0),n.article.createdAt,"longDate"))),t(e,22,0,!n.canModify),t(e,24,0,l["\u0275nov"](e,25).target,l["\u0275nov"](e,25).href),t(e,37,0,n.canModify),t(e,44,0,n.article.author.following?"Unfollow":"Follow",n.article.author.username),t(e,51,0,n.article.favorited?"Unfavorite":"Favorite"),t(e,53,0,n.article.favoritesCount)})}var A=n("Pqcd"),L=n("o18J"),x=n("LaOa"),w=n("5O0w"),R=n("Dxsx"),j=n("TO51"),T={data:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}},comments:[],loaded:!1,loading:!1},F=this&&this.__assign||Object.assign||function(t){for(var e,n=1,l=arguments.length;n<l;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function $(t,e){switch(void 0===t&&(t=T),e.type){case"[article] LOAD_ARTICLE_SUCCESS":return F({},t,{data:e.payload,loaded:!0,loading:!1});case"[article] LOAD_ARTICLE_FAIL":return F({},t,{data:T.data,loaded:!1,loading:!1});case"[article] ADD_COMMENT_SUCCESS":var n=[e.payload].concat(t.comments);return F({},t,{comments:n});case"[article] DELETE_COMMENT_SUCCESS":return n=t.comments.filter(function(t){return t.id!==e.payload}),F({},t,{comments:n});case"[article] INITIALIZE_ARTICLE":case"[article] DELETE_ARTICLE_FAIL":return T;case"[article] LOAD_COMMENTS_SUCCESS":return F({},t,{comments:e.payload});case"[article] LOAD_COMMENTS_FAIL":return F({},t,{comments:T.comments});case"[article] FOLLOW_SUCCESS":case"[article] UNFOLLOW_SUCCESS":var l=F({},t.data,{author:e.payload});return F({},t,{data:l});case"[article] FAVORITE_SUCCESS":case"[article] UNFAVORITE_SUCCESS":return F({},t,{data:e.payload});default:return t}}var D=function(t){return t.article.data},U=function(t){return t.article.comments},I=function(t){return t.article.loaded},M=[{type:"TEXTAREA",name:"comment",placeholder:"Write a comment...",attrs:{rows:3}}],N=function(){function t(t){this.store=t,this.canModify=!1,this.unsubscribe$=new j.a}return t.prototype.ngOnInit=function(){var t=this;this.article$=this.store.select(D),this.comments$=this.store.select(U),this.isAuthenticated$=this.store.select(A.c),this.currentUser$=this.store.select(A.d),this.data$=this.store.select(L.a),this.structure$=this.store.select(L.c),this.touchedForm$=this.store.select(L.d),this.store.dispatch({type:"[ngrxForms] SET_STRUCTURE",payload:M}),this.store.dispatch({type:"[ngrxForms] SET_DATA",payload:""}),this.store.pipe(Object(s.select)(A.b)).pipe(Object(x.a)(function(t){return t.loggedIn}),Object(R.a)(this.article$),Object(w.a)(this.unsubscribe$)).subscribe(function(e){t.canModify=e[0].user.username===e[1].author.username})},t.prototype.follow=function(t){this.store.dispatch({type:"[article] FOLLOW",payload:t})},t.prototype.unfollow=function(t){this.store.dispatch({type:"[article] UNFOLLOW",payload:t})},t.prototype.favorite=function(t){this.store.dispatch({type:"[article] FAVORITE",payload:t})},t.prototype.unfavorite=function(t){this.store.dispatch({type:"[article] UNFAVORITE",payload:t})},t.prototype.delete=function(t){this.store.dispatch({type:"[article] DELETE_ARTICLE",payload:t})},t.prototype.deleteComment=function(t){this.store.dispatch({type:"[article] DELETE_COMMENT",payload:t})},t.prototype.updateForm=function(t){this.store.dispatch({type:"[ngrxForms] UPDATE_DATA",payload:t})},t.prototype.submit=function(t){this.store.dispatch({type:"[article] ADD_COMMENT",payload:t})},t.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch({type:"[article] INITIALIZE_ARTICLE"})},t}(),K=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function q(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,4,"app-add-comment",[],null,[[null,"submit"],[null,"updateForm"]],function(t,e,n){var l=!0,r=t.component;return"submit"===e&&(l=!1!==r.submit(n)&&l),"updateForm"===e&&(l=!1!==r.updateForm(n)&&l),l},m,f)),l["\u0275did"](1,49152,null,0,h,[],{article:[0,"article"],currentUser:[1,"currentUser"],data$:[2,"data$"],structure$:[3,"structure$"],touchedForm$:[4,"touchedForm$"]},{submit:"submit",updateForm:"updateForm"}),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t\t"]))],function(t,e){var n=e.component;t(e,1,0,l["\u0275unv"](e,1,0,l["\u0275nov"](e,2).transform(n.article$)),l["\u0275unv"](e,1,1,l["\u0275nov"](e,3).transform(n.currentUser$)),n.data$,n.structure$,n.touchedForm$)},null)}function P(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,11,"div",[],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t\t\t"])),(t()(),l["\u0275eld"](2,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](3,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](4,1),(t()(),l["\u0275ted"](-1,null,["Sign in"])),(t()(),l["\u0275ted"](-1,null,[" or\n\t\t\t\t\t"])),(t()(),l["\u0275eld"](7,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["\u0275nov"](t,8).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r},null,null)),l["\u0275did"](8,671744,null,0,b.o,[b.m,b.a,g.i],{routerLink:[0,"routerLink"]},null),l["\u0275pad"](9,1),(t()(),l["\u0275ted"](-1,null,["sign up"])),(t()(),l["\u0275ted"](-1,null,[" to add comments on this article.\n\t\t\t\t"]))],function(t,e){t(e,3,0,t(e,4,0,"/login")),t(e,8,0,t(e,9,0,"/register"))},function(t,e){t(e,2,0,l["\u0275nov"](e,3).target,l["\u0275nov"](e,3).href),t(e,7,0,l["\u0275nov"](e,8).target,l["\u0275nov"](e,8).href)})}function V(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,3,"app-article-comment",[],null,[[null,"delete"]],function(t,e,n){var l=!0;return"delete"===e&&(l=!1!==t.component.deleteComment(n)&&l),l},_,v)),l["\u0275did"](1,49152,null,0,y,[],{currentUser:[0,"currentUser"],comment:[1,"comment"],article:[2,"article"]},{delete:"delete"}),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef])],function(t,e){var n=e.component;t(e,1,0,l["\u0275unv"](e,1,0,l["\u0275nov"](e,2).transform(n.currentUser$)),e.context.$implicit,l["\u0275unv"](e,1,2,l["\u0275nov"](e,3).transform(n.article$)))},null)}function z(t){return l["\u0275vid"](2,[l["\u0275pid"](0,k,[]),(t()(),l["\u0275eld"](1,0,null,null,55,"div",[["class","article-page"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275eld"](3,0,null,null,13,"div",[["class","banner"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](5,0,null,null,10,"div",[["class","container"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](7,0,null,null,2,"h1",[],null,null,null,null,null)),(t()(),l["\u0275ted"](8,null,["",""])),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](11,0,null,null,3,"app-article-meta",[],null,[[null,"follow"],[null,"unfollow"],[null,"favorite"],[null,"unfavorite"],[null,"delete"]],function(t,e,n){var l=!0,r=t.component;return"follow"===e&&(l=!1!==r.follow(n)&&l),"unfollow"===e&&(l=!1!==r.unfollow(n)&&l),"favorite"===e&&(l=!1!==r.favorite(n)&&l),"unfavorite"===e&&(l=!1!==r.unfavorite(n)&&l),"delete"===e&&(l=!1!==r.delete(n)&&l),l},C,S)),l["\u0275did"](12,49152,null,0,O,[],{article:[0,"article"],canModify:[1,"canModify"]},{follow:"follow",unfollow:"unfollow",unfavorite:"unfavorite",favorite:"favorite",delete:"delete"}),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"])),(t()(),l["\u0275ted"](-1,null,["\n\n\t"])),(t()(),l["\u0275eld"](18,0,null,null,38,"div",[["class","container page"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](20,0,null,null,8,"div",[["class","row article-content"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](22,0,null,null,5,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t\t"])),(t()(),l["\u0275eld"](24,0,null,null,2,"div",[],[[8,"innerHTML",1]],null,null,null,null)),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),l["\u0275ppd"](26,1),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](30,0,null,null,0,"hr",[],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275eld"](32,0,null,null,5,"div",[["class","article-actions"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](34,0,null,null,2,"app-article-meta",[],null,[[null,"follow"],[null,"unfollow"],[null,"favorite"],[null,"unfavorite"],[null,"delete"]],function(t,e,n){var l=!0,r=t.component;return"follow"===e&&(l=!1!==r.follow(n)&&l),"unfollow"===e&&(l=!1!==r.unfollow(n)&&l),"favorite"===e&&(l=!1!==r.favorite(n)&&l),"unfavorite"===e&&(l=!1!==r.unfavorite(n)&&l),"delete"===e&&(l=!1!==r.delete(n)&&l),l},C,S)),l["\u0275did"](35,49152,null,0,O,[],{article:[0,"article"],canModify:[1,"canModify"]},{follow:"follow",unfollow:"unfollow",unfavorite:"unfavorite",favorite:"favorite",delete:"delete"}),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\n\t\t"])),(t()(),l["\u0275eld"](39,0,null,null,16,"div",[["class","row"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),l["\u0275eld"](41,0,null,null,13,"div",[["class","col-xs-12 col-md-8 offset-md-2"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["\n\n\t\t\t\t"])),(t()(),l["\u0275and"](16777216,null,null,2,null,q)),l["\u0275did"](44,16384,null,0,g.l,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\n\t\t\t\t"])),(t()(),l["\u0275and"](16777216,null,null,2,null,P)),l["\u0275did"](48,16384,null,0,g.l,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\n\t\t\t\t"])),(t()(),l["\u0275and"](16777216,null,null,2,null,V)),l["\u0275did"](52,802816,null,0,g.k,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),l["\u0275pid"](131072,g.b,[l.ChangeDetectorRef]),(t()(),l["\u0275ted"](-1,null,["\n\n\t\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t\t"])),(t()(),l["\u0275ted"](-1,null,["\n\t"]))],function(t,e){var n=e.component;t(e,12,0,l["\u0275unv"](e,12,0,l["\u0275nov"](e,13).transform(n.article$)),n.canModify),t(e,35,0,l["\u0275unv"](e,35,0,l["\u0275nov"](e,36).transform(n.article$)),n.canModify),t(e,44,0,l["\u0275unv"](e,44,0,l["\u0275nov"](e,45).transform(n.isAuthenticated$))),t(e,48,0,!l["\u0275unv"](e,48,0,l["\u0275nov"](e,49).transform(n.isAuthenticated$))),t(e,52,0,l["\u0275unv"](e,52,0,l["\u0275nov"](e,53).transform(n.comments$)))},function(t,e){var n,r=e.component;t(e,8,0,l["\u0275unv"](e,8,0,l["\u0275nov"](e,9).transform(r.article$)).title),t(e,24,0,l["\u0275unv"](e,24,0,t(e,26,0,l["\u0275nov"](e,0),null==(n=l["\u0275unv"](e,24,0,l["\u0275nov"](e,25).transform(r.article$)))?null:n.body)))})}var W=l["\u0275ccf"]("app-article",N,function(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-article",[],null,null,null,z,K)),l["\u0275did"](1,245760,null,0,N,[s.Store],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Z=n("Cd5i"),J=n("6Pz1"),X=n("9iV4"),G=n("pXwq"),H=n("nihM"),B=function(){function t(t){this.store=t}return t.prototype.waitForArticleToLoad=function(){return this.store.pipe(Object(s.select)(I),Object(x.a)(function(t){return t}),Object(G.a)(1))},t.prototype.canActivate=function(t){var e=this,n=t.params.slug;return this.store.dispatch({type:"[article] LOAD_ARTICLE",payload:n}),this.waitForArticleToLoad().pipe(Object(H.a)(function(){return e.store.dispatch({type:"[article] LOAD_COMMENTS",payload:n})}))},t}(),Y=n("xbAL"),Q=n("3hAx"),tt=n("Tl+Y"),et=n("lWwI"),nt=n("qqDE"),lt=function(){function t(t){this.apiService=t}return t.prototype.get=function(t){return this.apiService.get("/articles/"+t).pipe(Object(nt.a)(function(t){return t.article}))},t.prototype.getComments=function(t){return this.apiService.get("/articles/"+t+"/comments").pipe(Object(nt.a)(function(t){return t.comments}))},t.prototype.deleteArticle=function(t){return this.apiService.delete("/articles/"+t)},t.prototype.deleteComment=function(t,e){return this.apiService.delete("/articles/"+e+"/comments/"+t)},t.prototype.addComment=function(t,e){return void 0===e&&(e=""),this.apiService.post("/articles/"+t+"/comments",{comment:{body:e}}).pipe(Object(nt.a)(function(t){return t.comment}))},t}(),rt=n("rzKu"),it=n("6Xbx"),ot=(n("RSzd"),n("GZB0")),ut=n("wORZ"),at=n("8JPw"),st=n("ogaK"),ct=n("wP3s"),dt=function(){function t(t,e,n,l,r){var i=this;this.actions=t,this.dataPersistence=e,this.articleService=n,this.actionsService=l,this.store=r,this.loadArticle=this.actions.ofType("[article] LOAD_ARTICLE").pipe(Object(at.a)(function(t){return i.articleService.get(t.payload).pipe(Object(nt.a)(function(t){return{type:"[article] LOAD_ARTICLE_SUCCESS",payload:t}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] LOAD_ARTICLE_FAIL",payload:t})}))})),this.loadComments=this.actions.ofType("[article] LOAD_COMMENTS").pipe(Object(at.a)(function(t){return i.articleService.getComments(t.payload).pipe(Object(nt.a)(function(t){return{type:"[article] LOAD_COMMENTS_SUCCESS",payload:t}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] LOAD_COMMENTS_FAIL",payload:t})}))})),this.deleteArticle=this.actions.ofType("[article] DELETE_ARTICLE").pipe(Object(at.a)(function(t){return i.articleService.deleteArticle(t.payload).pipe(Object(nt.a)(function(t){return{type:"[Router] Go",payload:{path:["/"]}}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] DELETE_ARTICLE_FAIL",payload:t})}))})),this.addComment=this.actions.ofType("[article] ADD_COMMENT").pipe(Object(nt.a)(function(t){return t.payload}),Object(R.a)(this.store.select(L.a),this.store.select(L.c)),Object(st.a)(function(t){return i.articleService.addComment(t[0],t[1].comment).pipe(Object(ct.a)(function(t){return[{type:"[article] ADD_COMMENT_SUCCESS",payload:t},{type:"[ngrxForms] RESET_FORM"}]}),Object(ut.a)(function(t){return Object(ot.of)({type:"[ngrxForms] SET_ERRORS",payload:t.error.errors})}))})),this.deleteComment=this.actions.ofType("[article] DELETE_COMMENT").pipe(Object(nt.a)(function(t){return t.payload}),Object(at.a)(function(t){return i.articleService.deleteComment(t.commentId,t.slug).pipe(Object(nt.a)(function(e){return{type:"[article] DELETE_COMMENT_SUCCESS",payload:t.commentId}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] DELETE_COMMENT_FAIL",payload:t})}))})),this.follow=this.actions.ofType("[article] FOLLOW").pipe(Object(nt.a)(function(t){return t.payload}),Object(at.a)(function(t){return i.actionsService.followUser(t).pipe(Object(nt.a)(function(t){return{type:"[article] FOLLOW_SUCCESS",payload:t}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] FOLLOW_FAIL",payload:t})}))})),this.unFollow=this.actions.ofType("[article] UNFOLLOW").pipe(Object(nt.a)(function(t){return t.payload}),Object(at.a)(function(t){return i.actionsService.unfollowUser(t).pipe(Object(nt.a)(function(t){return{type:"[article] UNFOLLOW_SUCCESS",payload:t}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] UNFOLLOW_FAIL",payload:t})}))})),this.favorite=this.actions.ofType("[article] FAVORITE").pipe(Object(nt.a)(function(t){return t.payload}),Object(at.a)(function(t){return i.actionsService.favorite(t).pipe(Object(nt.a)(function(t){return{type:"[article] FAVORITE_SUCCESS",payload:t}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] FAVORITE_FAIL",payload:t})}))})),this.unFavorite=this.actions.ofType("[article] UNFAVORITE").pipe(Object(nt.a)(function(t){return t.payload}),Object(at.a)(function(t){return i.actionsService.unfavorite(t).pipe(Object(nt.a)(function(t){return{type:"[article] UNFAVORITE_SUCCESS",payload:t}}),Object(ut.a)(function(t){return Object(ot.of)({type:"[article] UNFAVORITE_FAIL",payload:t})}))}))}return Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"loadArticle",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"loadComments",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"deleteArticle",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"addComment",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"deleteComment",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"follow",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"unFollow",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"favorite",void 0),Object(it.__decorate)([Object(tt.Effect)(),Object(it.__metadata)("design:type",Object)],t.prototype,"unFavorite",void 0),t}(),pt=n("MsLb"),ht=n("DMoS");n.d(e,"ArticleModuleNgFactory",function(){return ft});var ft=l["\u0275cmf"](r,[],function(t){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,o.a,W]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,g.n,g.m,[l.LOCALE_ID,[2,g.r]]),l["\u0275mpd"](4608,Z.a,Z.a,[]),l["\u0275mpd"](4608,J.a,J.a,[Z.a,s.Store]),l["\u0275mpd"](5120,X.a,function(t,e){return[new J.a(t,e)]},[Z.a,s.Store]),l["\u0275mpd"](4608,p.d,p.d,[]),l["\u0275mpd"](4608,p.o,p.o,[]),l["\u0275mpd"](4608,B,B,[s.Store]),l["\u0275mpd"](512,g.c,g.c,[]),l["\u0275mpd"](512,Y.a,Y.a,[]),l["\u0275mpd"](512,b.p,b.p,[[2,b.v],[2,b.m]]),l["\u0275mpd"](1024,s.STORE_FEATURES,function(){return[{key:"ngrxForms",reducerFactory:s.combineReducers,metaReducers:[],initialState:{data:{},structure:[],valid:!0,errors:{},touched:!1}},{key:"article",reducerFactory:s.combineReducers,metaReducers:[],initialState:{data:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}},comments:[],loaded:!1,loading:!1}}]},[]),l["\u0275mpd"](1024,s._FEATURE_REDUCERS,function(){return[L.e,$]},[]),l["\u0275mpd"](1024,s._FEATURE_REDUCERS_TOKEN,function(t,e){return[t,e]},[s._FEATURE_REDUCERS,s._FEATURE_REDUCERS]),l["\u0275mpd"](1024,s.FEATURE_REDUCERS,function(t,e,n,l,r,i){return[s._createFeatureReducers(t,e,n),s._createFeatureReducers(l,r,i)]},[l.Injector,s._FEATURE_REDUCERS,s._FEATURE_REDUCERS_TOKEN,l.Injector,s._FEATURE_REDUCERS,s._FEATURE_REDUCERS_TOKEN]),l["\u0275mpd"](131584,s.StoreFeatureModule,s.StoreFeatureModule,[s.STORE_FEATURES,s.FEATURE_REDUCERS,s.ReducerManager,s.StoreRootModule]),l["\u0275mpd"](512,Q.a,Q.a,[tt.Actions]),l["\u0275mpd"](512,lt,lt,[et.a]),l["\u0275mpd"](512,rt.a,rt.a,[et.a]),l["\u0275mpd"](512,dt,dt,[tt.Actions,pt.DataPersistence,lt,rt.a,s.Store]),l["\u0275mpd"](1024,tt["\u0275e"],function(t,e){return[tt["\u0275a"](t),tt["\u0275a"](e)]},[Q.a,dt]),l["\u0275mpd"](512,tt["\u0275c"],tt["\u0275c"],[tt["\u0275b"],tt["\u0275e"],[2,s.StoreRootModule],[2,s.StoreFeatureModule]]),l["\u0275mpd"](512,p.m,p.m,[]),l["\u0275mpd"](512,p.k,p.k,[]),l["\u0275mpd"](512,ht.a,ht.a,[]),l["\u0275mpd"](512,r,r,[]),l["\u0275mpd"](1024,b.k,function(){return[[{path:"",component:N,canActivate:[B]}]]},[])])})},yDcv:function(t,e,n){(function(e){(function(){"use strict";var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:p,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:p,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:p,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function n(t){this.tokens=[],this.tokens.links={},this.options=t||f.defaults,this.rules=e.normal,this.options.gfm&&(this.rules=this.options.tables?e.tables:e.gfm)}e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=a(e.item,"gm")(/bull/g,e.bullet)(),e.list=a(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")(),e.blockquote=a(e.blockquote)("def",e.def)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=a(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=a(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=h({},e),e.gfm=h({},e.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),e.gfm.paragraph=a(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")(),e.tables=h({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),n.rules=e,n.lex=function(t,e){return new n(e).lex(t)},n.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},n.prototype.token=function(t,n,l){var r,i,o,u,a,s,c,d,p;for(t=t.replace(/^ +$/gm,"");t;)if((o=this.rules.newline.exec(t))&&(t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(t))t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(n&&(o=this.rules.nptable.exec(t))){for(t=t.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},d=0;d<s.align.length;d++)s.align[d]=/^ *-+: *$/.test(s.align[d])?"right":/^ *:-+: *$/.test(s.align[d])?"center":/^ *:-+ *$/.test(s.align[d])?"left":null;for(d=0;d<s.cells.length;d++)s.cells[d]=s.cells[d].split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.lheading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(t)){for(t=t.substring(o[0].length),this.tokens.push({type:"list_start",ordered:(u=o[2]).length>1}),r=!1,p=(o=o[0].match(this.rules.item)).length,d=0;d<p;d++)c=(s=o[d]).length,~(s=s.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(c-=s.length,s=s.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&d!==p-1&&(u===(a=e.bullet.exec(o[d+1])[0])||u.length>1&&a.length>1||(t=o.slice(d+1).join("\n")+t,d=p-1)),i=r||/\n\n(?!\s*$)/.test(s),d!==p-1&&(r="\n"===s.charAt(s.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(s,!1,l),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(t))t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!l&&n&&(o=this.rules.def.exec(t)))t=t.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(n&&(o=this.rules.table.exec(t))){for(t=t.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},d=0;d<s.align.length;d++)s.align[d]=/^ *-+: *$/.test(s.align[d])?"right":/^ *:-+: *$/.test(s.align[d])?"center":/^ *:-+ *$/.test(s.align[d])?"left":null;for(d=0;d<s.cells.length;d++)s.cells[d]=s.cells[d].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(n&&(o=this.rules.paragraph.exec(t)))t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var l={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,url:p,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:p,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function r(t,e){if(this.options=e||f.defaults,this.links=t,this.rules=l.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?l.breaks:l.gfm:this.options.pedantic&&(this.rules=l.pedantic)}function i(t){this.options=t||{}}function o(t){this.tokens=[],this.token=null,this.options=t||f.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(t,e){return t=t.source,e=e||"",function n(l,r){return l?(r=(r=r.source||r).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(l,r),n):new RegExp(t,e)}}function s(t,e){return c[" "+t]||(c[" "+t]=/^[^:]+:\/*[^/]*$/.test(t)?t+"/":t.replace(/[^/]*$/,"")),t=c[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+e:t+e}l._inside=/(?:\[[^\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,l._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,l.link=a(l.link)("inside",l._inside)("href",l._href)(),l.reflink=a(l.reflink)("inside",l._inside)(),l.normal=h({},l),l.pedantic=h({},l.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),l.gfm=h({},l.normal,{escape:a(l.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(l.text)("]|","~]|")("|","|https?://|")()}),l.breaks=h({},l.gfm,{br:a(l.br)("{2,}","*")(),text:a(l.gfm.text)("{2,}","*")()}),r.rules=l,r.output=function(t,e,n){return new r(e,n).output(t)},r.prototype.output=function(t){for(var e,n,l,r,i="";t;)if(r=this.rules.escape.exec(t))t=t.substring(r[0].length),i+=r[1];else if(r=this.rules.autolink.exec(t))t=t.substring(r[0].length),"@"===r[2]?(n=u(":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1])),l=this.mangle("mailto:")+n):l=n=u(r[1]),i+=this.renderer.link(l,null,n);else if(this.inLink||!(r=this.rules.url.exec(t))){if(r=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),t=t.substring(r[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):u(r[0]):r[0];else if(r=this.rules.link.exec(t))t=t.substring(r[0].length),this.inLink=!0,i+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(t))||(r=this.rules.nolink.exec(t))){if(t=t.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){i+=r[0].charAt(0),t=r[0].substring(1)+t;continue}this.inLink=!0,i+=this.outputLink(r,e),this.inLink=!1}else if(r=this.rules.strong.exec(t))t=t.substring(r[0].length),i+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(t))t=t.substring(r[0].length),i+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(t))t=t.substring(r[0].length),i+=this.renderer.codespan(u(r[2].trim(),!0));else if(r=this.rules.br.exec(t))t=t.substring(r[0].length),i+=this.renderer.br();else if(r=this.rules.del.exec(t))t=t.substring(r[0].length),i+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),i+=this.renderer.text(u(this.smartypants(r[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(r[0].length),n=u(r[1]),i+=this.renderer.link(l=n,null,n);return i},r.prototype.outputLink=function(t,e){var n=u(e.href),l=e.title?u(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,l,this.output(t[1])):this.renderer.image(n,l,u(t[1]))},r.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):t},r.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",l=t.length,r=0;r<l;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},i.prototype.code=function(t,e,n){if(this.options.highlight){var l=this.options.highlight(t,e);null!=l&&l!==t&&(n=!0,t=l)}return e?'<pre><code class="'+this.options.langPrefix+u(e,!0)+'">'+(n?t:u(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:u(t,!0))+"\n</code></pre>"},i.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.prototype.html=function(t){return t},i.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},i.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},i.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},i.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},i.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},i.prototype.strong=function(t){return"<strong>"+t+"</strong>"},i.prototype.em=function(t){return"<em>"+t+"</em>"},i.prototype.codespan=function(t){return"<code>"+t+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(t){return"<del>"+t+"</del>"},i.prototype.link=function(t,e,n){if(this.options.sanitize){try{var l=decodeURIComponent((r=t,r.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return n}if(0===l.indexOf("javascript:")||0===l.indexOf("vbscript:")||0===l.indexOf("data:"))return n}var r;this.options.baseUrl&&!d.test(t)&&(t=s(this.options.baseUrl,t));var i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+">"+n+"</a>"},i.prototype.image=function(t,e,n){this.options.baseUrl&&!d.test(t)&&(t=s(this.options.baseUrl,t));var l='<img src="'+t+'" alt="'+n+'"';return e&&(l+=' title="'+e+'"'),l+(this.options.xhtml?"/>":">")},i.prototype.text=function(t){return t},o.parse=function(t,e,n){return new o(e,n).parse(t)},o.prototype.parse=function(t){this.inline=new r(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,l,r="",i="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(r+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",l=0;l<e.length;l++)n+=this.renderer.tablecell(this.inline.output(e[l]),{header:!1,align:this.token.align[l]});i+=this.renderer.tablerow(n)}return this.renderer.table(r,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var o=this.token.ordered;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,o);case"list_item_start":for(i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var u=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(u);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var c={},d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function p(){}function h(t){for(var e,n,l=1;l<arguments.length;l++)for(n in e=arguments[l])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function f(t,e,l){if(l||"function"==typeof e){l||(l=e,e=null);var r,i,a=(e=h({},f.defaults,e||{})).highlight,s=0;try{r=n.lex(t,e)}catch(t){return l(t)}i=r.length;var c=function(t){if(t)return e.highlight=a,l(t);var n;try{n=o.parse(r,e)}catch(e){t=e}return e.highlight=a,t?l(t):l(null,n)};if(!a||a.length<3)return c();if(delete e.highlight,!i)return c();for(;s<r.length;s++)!function(t){"code"!==t.type?--i||c():a(t.text,t.lang,function(e,n){return e?c(e):null==n||n===t.text?--i||c():(t.text=n,t.escaped=!0,void(--i||c()))})}(r[s])}else try{return e&&(e=h({},f.defaults,e)),o.parse(n.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(e||f.defaults).silent)return"<p>An error occurred:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}}p.exec=p,f.options=f.setOptions=function(t){return h(f.defaults,t),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1,baseUrl:null},f.Parser=o,f.parser=o.parse,f.Renderer=i,f.Lexer=n,f.lexer=n.lex,f.InlineLexer=r,f.inlineLexer=r.output,f.parse=f,t.exports=f}).call(function(){return this||("undefined"!=typeof window?window:e)}())}).call(e,n("fRUx"))}});