webpackJsonp([5],{ST9c:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("LMZF"),l=function(){},o=r("As1N"),i=r("mIhp"),a=r("7rlV"),u=r("DjqJ"),c=r("ADVA"),d=r("sMAd"),p=r("AFmI"),s=r("0nO6"),E=r("UHIZ"),m=r("o18J"),f={article:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}}},R=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var l in e=arguments[r])Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t};function h(t,e){switch(e.type){case"[editor] LOAD_ARTICLE_SUCCESS":return R({},t,{article:e.payload});case"[editor] LOAD_ARTICLE_FAIL":case"[editor] INITIALIZE_ARTICLE":return f;default:return t}}var y=function(t){return t.editor.article},A=[{type:"INPUT",name:"title",placeholder:"Article Title",validator:[s.l.required]},{type:"INPUT",name:"description",placeholder:"What's this article about?",validator:[s.l.required]},{type:"TEXTAREA",name:"body",placeholder:"Write your article (in markdown)",validator:[s.l.required]},{type:"INPUT",name:"tagList",placeholder:"Enter Tags",validator:[]}],_=function(){function t(t,e){this.store=t,this.router=e}return t.prototype.ngOnInit=function(){var t=this;this.store.dispatch({type:"[ngrxForms] SET_STRUCTURE",payload:A}),this.data$=this.store.select(m.a),this.structure$=this.store.select(m.c),this.store.pipe(Object(c.select)(y)).subscribe(function(e){t.store.dispatch({type:"[ngrxForms] SET_DATA",payload:e})})},t.prototype.updateForm=function(t){this.store.dispatch({type:"[ngrxForms] UPDATE_DATA",payload:t})},t.prototype.submit=function(){this.store.dispatch({type:"[editor] PUBLISH_ARTICLE"})},t.prototype.ngOnDestroy=function(){this.store.dispatch({type:"[ngrxForms] INITIALIZE_FORM"}),this.store.dispatch({type:"[editor] INITIALIZE_ARTICLE"})},t}(),b=n["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function S(t){return n["\u0275vid"](2,[(t()(),n["\u0275eld"](0,0,null,null,20,"div",[["class","editor-page"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n\t"])),(t()(),n["\u0275eld"](2,0,null,null,17,"div",[["class","container page"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n\t\t"])),(t()(),n["\u0275eld"](4,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n\n\t\t\t"])),(t()(),n["\u0275eld"](6,0,null,null,11,"div",[["class","col-md-10 offset-md-1 col-xs-12"]],null,null,null,null,null)),(t()(),n["\u0275ted"](-1,null,["\n\n\t\t\t\t"])),(t()(),n["\u0275eld"](8,0,null,null,1,"app-list-errors",[],null,null,null,a.b,a.a)),n["\u0275did"](9,245760,null,0,u.a,[c.Store,n.ChangeDetectorRef],null,null),(t()(),n["\u0275ted"](-1,null,["\n\n\t\t\t\t"])),(t()(),n["\u0275eld"](11,0,null,null,2,"app-dynamic-form",[],null,[[null,"updateForm"]],function(t,e,r){var n=!0;return"updateForm"===e&&(n=!1!==t.component.updateForm(r)&&n),n},d.b,d.a)),n["\u0275did"](12,704512,null,0,p.a,[s.d],{structure$:[0,"structure$"],data$:[1,"data$"]},{updateForm:"updateForm"}),(t()(),n["\u0275ted"](-1,null,["\n\t\t\t\t"])),(t()(),n["\u0275ted"](-1,null,["\n\n\t\t\t\t"])),(t()(),n["\u0275eld"](15,0,null,null,1,"button",[["class","btn btn-lg pull-xs-right btn-primary"],["type","button"]],null,[[null,"click"]],function(t,e,r){var n=!0;return"click"===e&&(n=!1!==t.component.submit()&&n),n},null,null)),(t()(),n["\u0275ted"](-1,null,["\n\t\t\t\t\tPublish Article\n\t\t\t\t"])),(t()(),n["\u0275ted"](-1,null,["\n\t\t\t"])),(t()(),n["\u0275ted"](-1,null,["\n\n\t\t"])),(t()(),n["\u0275ted"](-1,null,["\n\t"])),(t()(),n["\u0275ted"](-1,null,["\n"]))],function(t,e){var r=e.component;t(e,9,0),t(e,12,0,r.structure$,r.data$)},null)}var T=n["\u0275ccf"]("app-article-editor",_,function(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,1,"app-article-editor",[],null,null,null,S,b)),n["\u0275did"](1,245760,null,0,_,[c.Store,E.m],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),v=r("Un6q"),O=r("Cd5i"),g=r("6Pz1"),F=r("rzKu"),I=r("lWwI"),C=r("9iV4"),U=r("GZB0"),L=function(){function t(t){this.store=t}return t.prototype.resolve=function(t,e){var r=t.params.slug;return r&&this.store.dispatch({type:"[editor] LOAD_ARTICLE",payload:r}),Object(U.of)(!0)},t}(),j=r("xbAL"),D=r("3hAx"),M=r("Tl+Y"),x=r("qqDE"),N=function(){function t(t){this.apiService=t}return t.prototype.publishArticle=function(t){return t.slug?this.apiService.put("/articles/"+t.slug,{article:t}).pipe(Object(x.a)(function(t){return t.article})):this.apiService.post("/articles/",{article:t}).pipe(Object(x.a)(function(t){return t.article}))},t.prototype.get=function(t){return this.apiService.get("/articles/"+t).pipe(Object(x.a)(function(t){return t.article}))},t}(),w=r("6Xbx"),P=(r("RSzd"),r("wORZ")),k=r("8JPw"),$=r("Dxsx"),q=function(){function t(t,e,r){var n=this;this.actions=t,this.store=e,this.editorService=r,this.editor=this.actions.ofType("[editor] PUBLISH_ARTICLE").pipe(Object(x.a)(function(t){return t.payload}),Object($.a)(this.store.select(m.a)),Object(k.a)(function(t){return n.editorService.publishArticle(t[1]).pipe(Object(x.a)(function(t){return{type:"[Router] Go",payload:{path:["article",t.slug]}}}),Object(P.a)(function(t){return Object(U.of)({type:"[ngrxForms] SET_ERRORS",payload:t.error.errors})}))})),this.loadArticle=this.actions.ofType("[editor] LOAD_ARTICLE").pipe(Object(k.a)(function(t){return n.editorService.get(t.payload).pipe(Object(x.a)(function(t){return{type:"[editor] LOAD_ARTICLE_SUCCESS",payload:t}}),Object(P.a)(function(t){return Object(U.of)({type:"[editor] LOAD_ARTICLE_FAIL",payload:t})}))}))}return Object(w.__decorate)([Object(M.Effect)(),Object(w.__metadata)("design:type",Object)],t.prototype,"editor",void 0),Object(w.__decorate)([Object(M.Effect)(),Object(w.__metadata)("design:type",Object)],t.prototype,"loadArticle",void 0),t}(),Z=r("DMoS");r.d(e,"EditorModuleNgFactory",function(){return J});var J=n["\u0275cmf"](l,[],function(t){return n["\u0275mod"]([n["\u0275mpd"](512,n.ComponentFactoryResolver,n["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,i.a,T]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["\u0275mpd"](4608,v.n,v.m,[n.LOCALE_ID,[2,v.r]]),n["\u0275mpd"](4608,O.a,O.a,[]),n["\u0275mpd"](4608,g.a,g.a,[O.a,c.Store]),n["\u0275mpd"](4608,F.a,F.a,[I.a]),n["\u0275mpd"](5120,C.a,function(t,e){return[new g.a(t,e)]},[O.a,c.Store]),n["\u0275mpd"](4608,s.d,s.d,[]),n["\u0275mpd"](4608,s.o,s.o,[]),n["\u0275mpd"](4608,L,L,[c.Store]),n["\u0275mpd"](512,v.c,v.c,[]),n["\u0275mpd"](512,j.a,j.a,[]),n["\u0275mpd"](512,s.m,s.m,[]),n["\u0275mpd"](512,s.k,s.k,[]),n["\u0275mpd"](1024,c.STORE_FEATURES,function(){return[{key:"ngrxForms",reducerFactory:c.combineReducers,metaReducers:[],initialState:{data:{},structure:[],valid:!0,errors:{}}},{key:"editor",reducerFactory:c.combineReducers,metaReducers:[],initialState:{article:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}}}}]},[]),n["\u0275mpd"](1024,c._FEATURE_REDUCERS,function(){return[m.d,h]},[]),n["\u0275mpd"](1024,c._FEATURE_REDUCERS_TOKEN,function(t,e){return[t,e]},[c._FEATURE_REDUCERS,c._FEATURE_REDUCERS]),n["\u0275mpd"](1024,c.FEATURE_REDUCERS,function(t,e,r,n,l,o){return[c._createFeatureReducers(t,e,r),c._createFeatureReducers(n,l,o)]},[n.Injector,c._FEATURE_REDUCERS,c._FEATURE_REDUCERS_TOKEN,n.Injector,c._FEATURE_REDUCERS,c._FEATURE_REDUCERS_TOKEN]),n["\u0275mpd"](131584,c.StoreFeatureModule,c.StoreFeatureModule,[c.STORE_FEATURES,c.FEATURE_REDUCERS,c.ReducerManager,c.StoreRootModule]),n["\u0275mpd"](512,D.a,D.a,[M.Actions]),n["\u0275mpd"](512,N,N,[I.a]),n["\u0275mpd"](512,q,q,[M.Actions,c.Store,N]),n["\u0275mpd"](1024,M["\u0275e"],function(t,e){return[M["\u0275a"](t),M["\u0275a"](e)]},[D.a,q]),n["\u0275mpd"](512,M["\u0275c"],M["\u0275c"],[M["\u0275b"],M["\u0275e"],[2,c.StoreRootModule],[2,c.StoreFeatureModule]]),n["\u0275mpd"](512,Z.a,Z.a,[]),n["\u0275mpd"](512,E.p,E.p,[[2,E.v],[2,E.m]]),n["\u0275mpd"](512,l,l,[]),n["\u0275mpd"](1024,E.k,function(){return[[{path:"",pathMatch:"full",component:_,resolve:{EditorResolverService:L}},{path:":slug",component:_,resolve:{EditorResolverService:L}}]]},[])])})}});