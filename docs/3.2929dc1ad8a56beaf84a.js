(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{pnUI:function(t,e,r){"use strict";r.r(e);var n=r("LoAr"),a=function(){},l=r("uUHb"),i=r("g0Sf"),o=r("C9Ky"),u=r("iG2+"),c=r("jtoi"),s=r("GovN"),p=r("P8G5"),d=r("PQOh"),f=r("IfiR"),h=r("eJKe"),b=r("MLQZ"),y={article:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}}},v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t};function g(t,e){switch(e.type){case b.a.LOAD_ARTICLE_SUCCESS:return v({},t,{article:e.payload});case b.a.LOAD_ARTICLE_FAIL:case b.a.INITIALIZE_ARTICLE:return y;default:return t}}var m=function(t){return t.editor.article},O=[{type:"INPUT",name:"title",placeholder:"Article Title",validator:[f.l.required]},{type:"INPUT",name:"description",placeholder:"What's this article about?",validator:[f.l.required]},{type:"TEXTAREA",name:"body",placeholder:"Write your article (in markdown)",validator:[f.l.required]},{type:"INPUT",name:"tagList",placeholder:"Enter Tags",validator:[]}],A=function(){function t(t,e){this.store=t,this.router=e}return t.prototype.ngOnInit=function(){var t=this;this.store.dispatch({type:"[ngrxForms] SET_STRUCTURE",payload:O}),this.data$=this.store.select(h.b),this.structure$=this.store.select(h.c),this.store.pipe(Object(s.E)(m)).subscribe(function(e){t.store.dispatch({type:"[ngrxForms] SET_DATA",payload:e})})},t.prototype.updateForm=function(t){this.store.dispatch({type:"[ngrxForms] UPDATE_DATA",payload:t})},t.prototype.submit=function(){this.store.dispatch({type:"[editor] PUBLISH_ARTICLE"})},t.prototype.ngOnDestroy=function(){this.store.dispatch({type:"[ngrxForms] INITIALIZE_FORM"}),this.store.dispatch({type:"[editor] INITIALIZE_ARTICLE"})},t}(),U=r("981U"),j=n.La({encapsulation:0,styles:[[""]],data:{}});function T(t){return n.fb(2,[(t()(),n.Na(0,0,null,null,9,"div",[["class","editor-page"]],null,null,null,null,null)),(t()(),n.Na(1,0,null,null,8,"div",[["class","container page"]],null,null,null,null,null)),(t()(),n.Na(2,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(t()(),n.Na(3,0,null,null,6,"div",[["class","col-md-10 offset-md-1 col-xs-12"]],null,null,null,null,null)),(t()(),n.Na(4,0,null,null,1,"app-list-errors",[],null,null,null,u.b,u.a)),n.Ma(5,245760,null,0,c.a,[s.n,n.h],null,null),(t()(),n.Na(6,0,null,null,1,"app-dynamic-form",[],null,[[null,"updateForm"]],function(t,e,r){var n=!0;return"updateForm"===e&&(n=!1!==t.component.updateForm(r)&&n),n},p.b,p.a)),n.Ma(7,245760,null,0,d.a,[f.d],{structure$:[0,"structure$"],data$:[1,"data$"]},{updateForm:"updateForm"}),(t()(),n.Na(8,0,null,null,1,"button",[["class","btn btn-lg pull-xs-right btn-primary"],["type","button"]],null,[[null,"click"]],function(t,e,r){var n=!0;return"click"===e&&(n=!1!==t.component.submit()&&n),n},null,null)),(t()(),n.db(-1,null,[" Publish Article "]))],function(t,e){var r=e.component;t(e,5,0),t(e,7,0,r.structure$,r.data$)},null)}var I=n.Ja("app-article-editor",A,function(t){return n.fb(0,[(t()(),n.Na(0,0,null,null,1,"app-article-editor",[],null,null,null,T,j)),n.Ma(1,245760,null,0,A,[s.n,U.n],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),E=r("WT9V"),L=r("pN2L"),R=function(){function t(t){this.store=t}return t.prototype.resolve=function(t,e){var r=t.params.slug;return r&&this.store.dispatch({type:"[editor] LOAD_ARTICLE",payload:r}),Object(L.a)(!0)},t}(),S=r("tM4j"),w=r("sFCE"),F=r("D3xR"),N=(r("Ecwh"),r("Jg5f")),C=function(){function t(t){this.apiService=t}return t.prototype.publishArticle=function(t){return t.slug?this.apiService.put("/articles/"+t.slug,{article:t}).pipe(Object(N.a)(function(t){return t.article})):this.apiService.post("/articles/",{article:t}).pipe(Object(N.a)(function(t){return t.article}))},t.prototype.get=function(t){return this.apiService.get("/articles/"+t).pipe(Object(N.a)(function(t){return t.article}))},t}(),_=r("T+Ru"),x=r("D57K"),q=r("HswR"),D=r("eb+u"),P=r("IMYO"),k=function(){function t(t,e,r){var n=this;this.actions=t,this.store=e,this.editorService=r,this.editor=this.actions.ofType(b.a.PUBLISH_ARTICLE).pipe(Object(N.a)(function(t){return t.payload}),Object(D.a)(this.store.select(h.b)),Object(q.a)(function(t){return n.editorService.publishArticle(t[1]).pipe(Object(N.a)(function(t){return{type:"[router] Go",payload:{path:["article",t.slug]}}}),Object(P.a)(function(t){return Object(L.a)({type:"[ngrxForms] SET_ERRORS",payload:t.error.errors})}))})),this.loadArticle=this.actions.ofType(b.a.LOAD_ARTICLE).pipe(Object(q.a)(function(t){return n.editorService.get(t.payload).pipe(Object(N.a)(function(t){return new b.d(t)}),Object(P.a)(function(t){return Object(L.a)(new b.c(t))}))}))}return Object(x.b)([Object(F.b)(),Object(x.d)("design:type",Object)],t.prototype,"editor",void 0),Object(x.b)([Object(F.b)(),Object(x.d)("design:type",Object)],t.prototype,"loadArticle",void 0),t}(),M=r("QxJv"),$=r("nu5s");r.d(e,"EditorModuleNgFactory",function(){return J});var J=n.Ka(a,[],function(t){return n.Ta([n.Ua(512,n.j,n.Z,[[8,[l.a,i.a,o.a,I]],[3,n.j],n.v]),n.Ua(4608,E.n,E.m,[n.s,[2,E.t]]),n.Ua(4608,f.d,f.d,[]),n.Ua(4608,f.o,f.o,[]),n.Ua(4608,R,R,[s.n]),n.Ua(1073742336,E.c,E.c,[]),n.Ua(1073742336,f.m,f.m,[]),n.Ua(1073742336,f.k,f.k,[]),n.Ua(1024,s.j,function(){return[{key:"ngrxForms",reducerFactory:s.z,metaReducers:[],initialState:{data:{},structure:[],valid:!0,errors:{},touched:!1}},{key:"editor",reducerFactory:s.z,metaReducers:[],initialState:{article:{slug:"",title:"",description:"",body:"",tagList:[],createdAt:"",updatedAt:"",favorited:!1,favoritesCount:0,author:{username:"",bio:"",image:"",following:!1,loading:!1}}}}]},[]),n.Ua(1024,s.q,function(){return[S.e,g]},[]),n.Ua(1024,s.r,function(t,e){return[t,e]},[s.q,s.q]),n.Ua(1024,s.b,function(t,e,r,n,a,l){return[s.w(t,e,r),s.w(n,a,l)]},[n.p,s.q,s.r,n.p,s.q,s.r]),n.Ua(1073873408,s.o,s.o,[s.j,s.b,s.g,s.p]),n.Ua(512,w.a,w.a,[F.a]),n.Ua(512,C,C,[_.a]),n.Ua(512,k,k,[F.a,s.n,C]),n.Ua(1024,F.h,function(t,e){return[F.d(t),F.d(e)]},[w.a,k]),n.Ua(1073742336,F.f,F.f,[F.e,F.h,[2,s.p],[2,s.o]]),n.Ua(1073742336,M.a,M.a,[]),n.Ua(1073742336,U.q,U.q,[[2,U.x],[2,U.n]]),n.Ua(1073742336,a,a,[]),n.Ua(1024,U.l,function(){return[[{path:"",pathMatch:"full",component:A,resolve:{EditorResolverService:R},canActivate:[$.a]},{path:":slug",component:A,resolve:{EditorResolverService:R}}]]},[])])})}}]);